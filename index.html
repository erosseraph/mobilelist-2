<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®šåˆ¶ä½ çš„ä¸“å±æ­Œå… v2.0.0</title>
    
    <!-- PWA é…ç½® -->
    <meta name="theme-color" content="#1a2a6c">
    <meta name="description" content="ä¸“ä¸šæ­Œå…å®šåˆ¶æœåŠ¡ï¼Œæ‰“é€ æ‚¨çš„ä¸“å±éŸ³ä¹ç©ºé—´">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="æ­Œå…å®šåˆ¶">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-analytics-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            padding-bottom: 80px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* å¯¼èˆªæ æ ·å¼ */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            margin-bottom: 20px;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .nav-buttons {
            display: flex;
            gap: 15px;
        }
        
        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }
        
        .nav-btn:hover, .nav-btn.active {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .user-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .login-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .login-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .user-info {
            display: none;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .logout-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        
        /* é¡µé¢å®¹å™¨ */
        .page-container {
            display: flex;
            gap: 20px;
            min-height: 600px;
        }
        
        /* ç‚¹æ­Œç³»ç»Ÿé¡µé¢ */
        #karaoke-page {
            display: flex;
            flex: 1;
            gap: 20px;
        }
        
        .songs-section {
            flex: 2;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }
        
        .playlist-section {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            max-height: 600px;
            overflow-y: auto;
        }
        
        /* æ’è¡Œæ¦œæ ·å¼ */
        .charts-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .chart-category {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }
        
        .chart-category:hover, .chart-category.active {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        /* æœç´¢æ¡†æ ·å¼ */
        .search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .search-input {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            backdrop-filter: blur(10px);
        }
        
        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .search-btn, .clear-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .search-btn:hover, .clear-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* æ­Œæ›²åˆ—è¡¨æ ·å¼ */
        .songs-container {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        
        .song {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            transition: all 0.3s;
        }
        
        .song:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .song-info {
            flex: 1;
        }
        
        .song-title {
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .song-artist {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .song-controls {
            display: flex;
            gap: 8px;
        }
        
        .preview-btn, .add-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }
        
        .preview-btn:hover, .add-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* æ­Œå•æ ·å¼ */
        .playlist-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .playlist-count {
            font-size: 1.1rem;
            font-weight: bold;
        }
        
        .share-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .share-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .playlist-items {
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .playlist-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            margin-bottom: 6px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .playlist-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .song-number {
            width: 25px;
            text-align: center;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .remove-btn {
            background: rgba(255, 59, 48, 0.3);
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }
        
        .remove-btn:hover {
            background: rgba(255, 59, 48, 0.5);
        }
        
        .empty-playlist {
            text-align: center;
            padding: 40px 20px;
            opacity: 0.7;
        }
        
        /* ä»·æ ¼é¡µé¢æ ·å¼ */
        #pricing-page {
            display: none;
        }
        
        .pricing-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            padding: 20px;
        }
        
        .pricing-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s;
            position: relative;
        }
        
        .pricing-card:hover {
            transform: translateY(-5px);
        }
        
        .pricing-card.popular {
            border: 2px solid #ffd700;
        }
        
        .popular-badge {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: #ffd700;
            color: #333;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .plan-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .price {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .song-range {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 20px;
        }
        
        .select-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            width: 100%;
        }
        
        .select-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* è®¢å•é¡µé¢æ ·å¼ */
        #order-page {
            display: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
        }
        
        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            border-radius: 15px;
            padding: 30px;
            width: 100%;
            max-width: 400px;
            backdrop-filter: blur(10px);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .login-methods {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .login-method-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .login-method-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* å·¥å…·ç±» */
        .hidden {
            display: none !important;
        }
        
        .loading {
            text-align: center;
            padding: 40px 20px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <!-- ç™»å½•æ¨¡æ€æ¡† -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">ç™»å½• / æ³¨å†Œ</h2>
                <button class="close-btn" id="close-login">&times;</button>
            </div>
            
            <div class="login-methods">
                <button class="login-method-btn" id="email-login-btn">
                    ğŸ“§ é‚®ç®±ç™»å½•/æ³¨å†Œ
                </button>
                <button class="login-method-btn" id="google-login-btn">
                    ğŸ”µ Google ç™»å½•
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- å¯¼èˆªæ  -->
        <nav class="navbar">
            <div class="logo">
                ğŸ¤ å®šåˆ¶ä½ çš„ä¸“å±æ­Œå… v2.0.0
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn active" id="karaoke-nav">ğŸµ ç‚¹æ­Œç³»ç»Ÿ</button>
                <button class="nav-btn" id="pricing-nav">ğŸ’° ä»·æ ¼é…å¥—</button>
                <div class="admin-section" id="admin-section">
                    <a href="admin.html" class="admin-link">ğŸ‘‘ ç®¡ç†é¢æ¿</a>
                </div>
            </div>
            
            <div class="user-section">
                <div class="user-info" id="user-info">
                    <div class="user-avatar" id="user-avatar">E</div>
                    <span class="user-email" id="user-email">Eros Seraph</span>
                    <button class="logout-btn" id="logout-btn">é€€å‡º</button>
                </div>
                <button class="login-btn" id="login-btn">ç™»å½•/æ³¨å†Œ</button>
            </div>
        </nav>
        
        <!-- é¡µé¢å®¹å™¨ -->
        <div class="page-container">
            <!-- ç‚¹æ­Œç³»ç»Ÿé¡µé¢ -->
            <div id="karaoke-page">
                <div class="songs-section">
                    <div class="charts-container">
                        <div class="chart-category active" data-category="chinese-pop">åè¯­æµè¡Œ</div>
                        <div class="chart-category" data-category="western-pop">æ¬§ç¾æµè¡Œ</div>
                        <div class="chart-category" data-category="chinese-dj">ä¸­æ–‡DJ</div>
                        <div class="chart-category" data-category="chinese-artists">åè¯­æ­Œæ‰‹</div>
                        <div class="chart-category" data-category="western-artists">æ¬§ç¾æ­Œæ‰‹</div>
                    </div>
                    
                    <div class="search-container">
                        <input type="text" class="search-input" id="search-input" placeholder="æœç´¢æ­Œæ›²åç§°ã€æ­Œæ‰‹...">
                        <button class="search-btn" id="search-btn">æœç´¢</button>
                        <button class="clear-btn" id="clear-btn">æ¸…ç©º</button>
                    </div>
                    
                    <div class="songs-container" id="songs-container">
                        <div class="loading">æ­£åœ¨åŠ è½½æ­Œæ›²...</div>
                    </div>
                </div>
                
                <div class="playlist-section">
                    <div class="playlist-header">
                        <div class="playlist-count">æˆ‘çš„æ­Œå• <span id="playlist-count">(0)</span></div>
                        <button class="share-btn" id="share-btn">åˆ†äº«æ­Œå•</button>
                    </div>
                    
                    <div class="playlist-items" id="playlist-items">
                        <div class="empty-playlist">æ­Œå•ä¸ºç©ºï¼Œè¯·ä»å·¦ä¾§æ·»åŠ æ­Œæ›²</div>
                    </div>
                </div>
            </div>
            
            <!-- ä»·æ ¼é…å¥—é¡µé¢ -->
            <div id="pricing-page">
                <div class="pricing-container">
                    <div class="pricing-card">
                        <div class="plan-name">åŸºç¡€ç‰ˆ</div>
                        <div class="price">RM 29</div>
                        <div class="song-range">1 - 20 é¦–æ­Œæ›²</div>
                        <button class="select-btn">é€‰æ‹©æ­¤é…å¥—</button>
                    </div>
                    
                    <div class="pricing-card popular">
                        <div class="popular-badge">æœ€å—æ¬¢è¿</div>
                        <div class="plan-name">è¿›é˜¶ç‰ˆ</div>
                        <div class="price">RM 69</div>
                        <div class="song-range">51 - 100 é¦–æ­Œæ›²</div>
                        <button class="select-btn">é€‰æ‹©æ­¤é…å¥—</button>
                    </div>
                    
                    <div class="pricing-card">
                        <div class="plan-name">è±ªåç‰ˆ</div>
                        <div class="price">RM 89</div>
                        <div class="song-range">101 - 200 é¦–æ­Œæ›²</div>
                        <button class="select-btn">é€‰æ‹©æ­¤é…å¥—</button>
                    </div>
                </div>
            </div>
            
            <!-- è®¢å•é¡µé¢ -->
            <div id="order-page">
                <h2>æäº¤è®¢å•</h2>
                <p>è®¢å•åŠŸèƒ½å¼€å‘ä¸­...</p>
            </div>
        </div>
    </div>

    <script>
        // ==================== Firebase é…ç½® ====================
        function getFirebaseConfig() {
            return {
                apiKey: "AIzaSyAMn7EOOUDpIGXzA8EhPBtLWw7BwyU2Rdc",
                authDomain: "karaoke-customizer.firebaseapp.com",
                projectId: "karaoke-customizer",
                storageBucket: "karaoke-customizer.firebasestorage.app",
                messagingSenderId: "593643512892",
                appId: "1:593643512892:web:c21ec4ce7c2d286fed4f39",
                measurementId: "G-D791D33Y6R"
            };
        }

        // ==================== åº”ç”¨çŠ¶æ€å˜é‡ ====================
        let currentUser = null;
        let currentSongs = [];
        let playlist = [];

        // ==================== é¡µé¢åˆå§‹åŒ– ====================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ åˆå§‹åŒ–åº”ç”¨...');
            
            // åˆå§‹åŒ–é¡µé¢å¯¼èˆª
            initPageNavigation();
            
            // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
            setupEventListeners();
            
            // æ¨¡æ‹Ÿç”¨æˆ·å·²ç™»å½•çŠ¶æ€
            simulateUserLogin();
            
            // åŠ è½½é»˜è®¤æ’è¡Œæ¦œ
            loadChart('chinese-pop');
        });

        // ==================== é¡µé¢å¯¼èˆªåŠŸèƒ½ ====================
        function initPageNavigation() {
            const karaokeNav = document.getElementById('karaoke-nav');
            const pricingNav = document.getElementById('pricing-nav');
            
            karaokeNav.addEventListener('click', function() {
                showPage('karaoke');
                setActiveNav(this);
            });
            
            pricingNav.addEventListener('click', function() {
                showPage('pricing');
                setActiveNav(this);
            });
        }
        
        function showPage(page) {
            const karaokePage = document.getElementById('karaoke-page');
            const pricingPage = document.getElementById('pricing-page');
            const orderPage = document.getElementById('order-page');
            
            // éšè—æ‰€æœ‰é¡µé¢
            karaokePage.style.display = 'none';
            pricingPage.style.display = 'none';
            orderPage.style.display = 'none';
            
            // æ˜¾ç¤ºç›®æ ‡é¡µé¢
            if (page === 'karaoke') {
                karaokePage.style.display = 'flex';
            } else if (page === 'pricing') {
                pricingPage.style.display = 'block';
            } else if (page === 'order') {
                orderPage.style.display = 'block';
            }
        }
        
        function setActiveNav(activeButton) {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            activeButton.classList.add('active');
        }

        // ==================== äº‹ä»¶ç›‘å¬å™¨ ====================
        function setupEventListeners() {
            // æ’è¡Œæ¦œç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.chart-category').forEach(chart => {
                chart.addEventListener('click', function() {
                    const category = this.dataset.category;
                    loadChart(category);
                    
                    // æ›´æ–°æ´»è·ƒçŠ¶æ€
                    document.querySelectorAll('.chart-category').forEach(c => {
                        c.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });
            
            // æœç´¢åŠŸèƒ½
            const searchBtn = document.getElementById('search-btn');
            const searchInput = document.getElementById('search-input');
            
            searchBtn.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            // æ¸…ç©ºæ­Œå•
            document.getElementById('clear-btn').addEventListener('click', clearPlaylist);
            
            // åˆ†äº«æ­Œå•
            document.getElementById('share-btn').addEventListener('click', sharePlaylist);
            
            // ç™»å½•æ¨¡æ€æ¡†
            document.getElementById('login-btn').addEventListener('click', function() {
                document.getElementById('login-modal').style.display = 'flex';
            });
            
            document.getElementById('close-login').addEventListener('click', function() {
                document.getElementById('login-modal').style.display = 'none';
            });
            
            // é€€å‡ºç™»å½•
            document.getElementById('logout-btn').addEventListener('click', function() {
                currentUser = null;
                updateUserUI();
                playlist = [];
                renderPlaylist();
                updatePlaylistCount();
            });
        }

        // ==================== æ¨¡æ‹Ÿç”¨æˆ·ç™»å½• ====================
        function simulateUserLogin() {
            currentUser = {
                displayName: 'Eros Seraph',
                email: 'erosseraph@gmail.com'
            };
            updateUserUI();
        }

        function updateUserUI() {
            const userInfo = document.getElementById('user-info');
            const loginBtn = document.getElementById('login-btn');
            
            if (currentUser) {
                userInfo.style.display = 'flex';
                loginBtn.style.display = 'none';
                
                // æ˜¾ç¤ºç®¡ç†å‘˜é¢æ¿
                document.getElementById('admin-section').style.display = 'block';
            } else {
                userInfo.style.display = 'none';
                loginBtn.style.display = 'block';
                document.getElementById('admin-section').style.display = 'none';
            }
        }

        // ==================== æ’è¡Œæ¦œåŠŸèƒ½ ====================
        async function loadChart(category) {
            console.log(`ğŸ“Š åŠ è½½ ${category} æ’è¡Œæ¦œ...`);
            
            // æ˜¾ç¤ºåŠ è½½ä¸­
            const songsContainer = document.getElementById('songs-container');
            songsContainer.innerHTML = '<div class="loading">æ­£åœ¨åŠ è½½æ­Œæ›²...</div>';
            
            try {
                // æ¨¡æ‹Ÿå»¶è¿Ÿ
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
                currentSongs = generateMockSongs(category);
                renderSongs(currentSongs);
                
            } catch (error) {
                console.error('åŠ è½½æ’è¡Œæ¦œå¤±è´¥:', error);
                songsContainer.innerHTML = '<div class="loading">åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•</div>';
            }
        }

        function generateMockSongs(category) {
            const songs = [];
            const artists = {
                'chinese-pop': ['å‘¨æ°ä¼¦', 'æ—ä¿Šæ°', 'é‚“ç´«æ£‹', 'è–›ä¹‹è°¦', 'æè£æµ©', 'ç‹åŠ›å®', 'é™ˆå¥•è¿…', 'å¼ æƒ å¦¹', 'è”¡ä¾æ—', 'å­™ç‡•å§¿'],
                'western-pop': ['Taylor Swift', 'Ed Sheeran', 'Ariana Grande', 'Justin Bieber', 'Billie Eilish', 'Drake', 'The Weeknd', 'Dua Lipa', 'Post Malone', 'Bruno Mars'],
                'chinese-dj': ['ç‹ç»é¾™', 'ä¸ƒå¦¹', 'è™å§¬', 'ä½•é¹', 'DJå°é±¼å„¿', 'DJæ•£äºº', 'DJå°å¯', 'DJé˜¿åœ£', 'DJä½•é¹', 'DJ Candy']
            };
            
            const categoryArtists = artists[category] || artists['chinese-pop'];
            
            for (let i = 0; i < 20; i++) {
                const artist = categoryArtists[Math.floor(Math.random() * categoryArtists.length)];
                songs.push({
                    id: i + 1,
                    title: `${artist}çš„çƒ­é—¨æ­Œæ›² ${i + 1}`,
                    artist: artist,
                    album: `${artist}çš„ä¸“è¾‘`,
                    previewUrl: null
                });
            }
            
            return songs;
        }

        function renderSongs(songs) {
            const songsContainer = document.getElementById('songs-container');
            songsContainer.innerHTML = '';
            
            songs.forEach(song => {
                const songElement = document.createElement('div');
                songElement.className = 'song';
                songElement.innerHTML = `
                    <div class="song-info">
                        <div class="song-title">${song.title}</div>
                        <div class="song-artist">${song.artist}</div>
                        <div class="song-album">${song.album}</div>
                    </div>
                    <div class="song-controls">
                        ${song.previewUrl ? '<button class="preview-btn">â–¶ï¸</button>' : ''}
                        <button class="add-btn" data-id="${song.id}">+</button>
                    </div>
                `;
                songsContainer.appendChild(songElement);
            });
            
            // æ·»åŠ æ­Œæ›²ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.add-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const songId = this.dataset.id;
                    addSongToPlaylist(songId);
                });
            });
        }

        // ==================== æ­Œå•åŠŸèƒ½ ====================
        function addSongToPlaylist(songId) {
            const song = currentSongs.find(s => s.id == songId);
            
            if (song && !playlist.some(s => s.id == songId)) {
                playlist.push(song);
                renderPlaylist();
                updatePlaylistCount();
                
                // æ˜¾ç¤ºæ·»åŠ æˆåŠŸæ¶ˆæ¯
                showMessage(`å·²æ·»åŠ  "${song.title}" åˆ°æ­Œå•`);
            }
        }

        function renderPlaylist() {
            const playlistContainer = document.getElementById('playlist-items');
            
            if (playlist.length === 0) {
                playlistContainer.innerHTML = '<div class="empty-playlist">æ­Œå•ä¸ºç©ºï¼Œè¯·ä»å·¦ä¾§æ·»åŠ æ­Œæ›²</div>';
                return;
            }
            
            playlistContainer.innerHTML = '';
            
            playlist.forEach((song, index) => {
                const playlistItem = document.createElement('div');
                playlistItem.className = 'playlist-item';
                playlistItem.innerHTML = `
                    <div style="display: flex; align-items: center;">
                        <div class="song-number">${index + 1}</div>
                        <div class="song-info">
                            <div class="song-title">${song.title}</div>
                            <div class="song-artist">${song.artist}</div>
                        </div>
                    </div>
                    <button class="remove-btn" data-index="${index}">Ã—</button>
                `;
                playlistContainer.appendChild(playlistItem);
            });
            
            // æ·»åŠ åˆ é™¤æŒ‰é’®äº‹ä»¶
            document.querySelectorAll('.remove-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.dataset.index);
                    removeSongFromPlaylist(index);
                });
            });
        }

        function removeSongFromPlaylist(index) {
            if (index >= 0 && index < playlist.length) {
                const songTitle = playlist[index].title;
                playlist.splice(index, 1);
                renderPlaylist();
                updatePlaylistCount();
                showMessage(`å·²ä»æ­Œå•ç§»é™¤ "${songTitle}"`);
            }
        }

        function updatePlaylistCount() {
            const playlistCount = document.getElementById('playlist-count');
            playlistCount.textContent = `(${playlist.length})`;
        }

        function clearPlaylist() {
            if (playlist.length === 0) {
                showMessage('æ­Œå•å·²ç»æ˜¯ç©ºçš„');
                return;
            }
            
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ­Œå•å—ï¼Ÿ')) {
                playlist = [];
                renderPlaylist();
                updatePlaylistCount();
                showMessage('æ­Œå•å·²æ¸…ç©º');
            }
        }

        function sharePlaylist() {
            if (playlist.length === 0) {
                showMessage('æ­Œå•ä¸ºç©ºï¼Œæ— æ³•åˆ†äº«');
                return;
            }
            
            showMessage('åˆ†äº«åŠŸèƒ½å¼€å‘ä¸­...');
        }

        // ==================== æœç´¢åŠŸèƒ½ ====================
        function performSearch() {
            const searchInput = document.getElementById('search-input');
            const query = searchInput.value.trim();
            
            if (!query) {
                showMessage('è¯·è¾“å…¥æœç´¢å…³é”®è¯');
                return;
            }
            
            // æ¨¡æ‹Ÿæœç´¢
            const filteredSongs = currentSongs.filter(song => 
                song.title.toLowerCase().includes(query.toLowerCase()) || 
                song.artist.toLowerCase().includes(query.toLowerCase())
            );
            
            if (filteredSongs.length === 0) {
                showMessage('æœªæ‰¾åˆ°ç›¸å…³æ­Œæ›²');
                return;
            }
            
            renderSongs(filteredSongs);
            showMessage(`æ‰¾åˆ° ${filteredSongs.length} é¦–ç›¸å…³æ­Œæ›²`);
        }

        // ==================== å·¥å…·å‡½æ•° ====================
        function showMessage(message) {
            // ç®€å•çš„æ¶ˆæ¯æç¤º
            alert(message);
        }
    </script>
</body>
</html>
